<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>B·∫£ng ƒëi·ªÅu khi·ªÉn c·∫£nh b√°o ch√°y</title>

<style>
    body {
        font-family: Arial, sans-serif;
        padding: 20px;
        background: #f8f8f8;
    }
    .card {
        background: white;
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 20px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        max-width: 500px;
    }
    h2 { margin-top: 0; }
    input {
        width: 100%;
        padding: 10px;
        font-size: 16px;
        margin-top: 10px;
    }
    button {
        padding: 10px 15px;
        margin-top: 10px;
        font-size: 16px;
        cursor: pointer;
    }
</style>
</head>

<body>

<h1>B·∫£ng ƒëi·ªÅu khi·ªÉn c·∫£nh b√°o ch√°y</h1>

<!-- NHI·ªÜT ƒê·ªò -->
<div class="card">
    <h2>üî• Nhi·ªát ƒë·ªô</h2>
    <div id="tempValue">ƒêang t·∫£i...</div>
</div>

<!-- KH√ìI -->
<div class="card">
    <h2>üí® M·ª©c ƒë·ªô kh√≥i</h2>
    <div id="smokeValue">ƒêang t·∫£i...</div>
</div>

<!-- NG∆Ø·ª†NG NHI·ªÜT ƒê·ªò -->
<div class="card">
    <h2>‚ö† Ng∆∞·ª°ng nhi·ªát ƒë·ªô</h2>
    <div style="font-size: 22px; font-weight: bold; margin-bottom: 10px;">
        Hi·ªán t·∫°i: <span id="thresholdValue">ƒêang t·∫£i...</span>
    </div>

    <input type="number" id="newThreshold" placeholder="Nh·∫≠p ng∆∞·ª°ng nhi·ªát ƒë·ªô m·ªõi">
    <button onclick="updateThreshold()">C·∫≠p nh·∫≠t</button>
</div>

<!-- NG∆Ø·ª†NG KH√ìI -->
<div class="card">
    <h2>üí® Ng∆∞·ª°ng kh√≥i</h2>
    <div style="font-size: 22px; font-weight: bold; margin-bottom: 10px;">
        Hi·ªán t·∫°i: <span id="smokeThresValue">ƒêang t·∫£i...</span>
    </div>

    <input type="number" id="newSmokeThres" placeholder="Nh·∫≠p ng∆∞·ª°ng kh√≥i m·ªõi">
    <button onclick="updateSmokeThreshold()">C·∫≠p nh·∫≠t</button>
</div>

<!-- Firebase v8 -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
// C·∫§U H√åNH FIREBASE
const firebaseConfig = {
    apiKey: "AIzaSyAAoqP-5Kkw_sMJOvLzMd9yMZsto86rQBk",
    authDomain: "fire-warning-3f43e.firebaseapp.com",
    databaseURL: "https://fire-warning-3f43e-default-rtdb.asia-southeast1.firebasedatabase.app/",
    projectId: "fire-warning-3f43e",
    storageBucket: "fire-warning-3f43e.firebasestorage.app",
    messagingSenderId: "216206579900",
    appId: "1:216206579900:web:aa5f46d236923b921418b9",
    measurementId: "G-1W9TMF3KDL"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// REALTIME: NHI·ªÜT ƒê·ªò
db.ref("Temperature").on("value", snapshot => {
    document.getElementById("tempValue").innerText = snapshot.val() + " ¬∞C";
});

// REALTIME: KH√ìI
db.ref("Smoke").on("value", snapshot => {
    document.getElementById("smokeValue").innerText = snapshot.val();
});

// REALTIME: NG∆Ø·ª†NG NHI·ªÜT ƒê·ªò
db.ref("Threshold").on("value", snapshot => {
    document.getElementById("thresholdValue").innerText = snapshot.val();
});

// REALTIME: NG∆Ø·ª†NG KH√ìI
db.ref("SmokeThreshold").on("value", snapshot => {
    document.getElementById("smokeThresValue").innerText = snapshot.val();
});

// C·∫¨P NH·∫¨T NG∆Ø·ª†NG NHI·ªÜT ƒê·ªò
function updateThreshold() {
    let input = document.getElementById("newThreshold");
    let val = input.value;

    if (val === "") {
        alert("Vui l√≤ng nh·∫≠p gi√° tr·ªã!");
        return;
    }

    db.ref("Threshold").set(Number(val));
    alert("ƒê√£ c·∫≠p nh·∫≠t ng∆∞·ª°ng nhi·ªát ƒë·ªô!");
    input.value = "";
}

// C·∫¨P NH·∫¨T NG∆Ø·ª†NG KH√ìI
function updateSmokeThreshold() {
    let input = document.getElementById("newSmokeThres");
    let val = input.value;

    if (val === "") {
        alert("Vui l√≤ng nh·∫≠p gi√° tr·ªã!");
        return;
    }

    db.ref("SmokeThreshold").set(Number(val));
    alert("ƒê√£ c·∫≠p nh·∫≠t ng∆∞·ª°ng kh√≥i!");
    input.value = "";
}

</script>

</body>
</html>


